// -- Sammy.js -- plugins/sammy.form_2_json.js
// http://sammyjs.org
// Version: 0.7.0
// Built: 2011-08-21T13:05:46+0200
(function(a){Sammy=Sammy||{},function(){function a(c){var d=[],e=c.firstChild;while(e){if(e.nodeName.match(/INPUT|SELECT|TEXTAREA/i)){var f=b(e);f!==null&&d.push({name:e.name,value:f})}else{var g=a(e);d=d.concat(g)}e=e.nextSibling}return d}function b(a){switch(a.nodeName){case"INPUT":case"TEXTAREA":switch(a.type.toLowerCase()){case"radio":case"checkbox":if(a.checked)return a.value;break;case"button":case"reset":case"submit":case"image":return"";default:return a.value}break;case"SELECT":return c(a);default:}return null}function c(a){var b=a.multiple;if(!b)return a.value;var c=[];for(var d=a.getElementsByTagName("option"),e=0,f=d.length;e<f;e++)d[e].selected&&c.push(d[e].value);return c}window.form2object=function(b,c,d){if(typeof d=="undefined"||d==null)d=!0;if(typeof c=="undefined"||c==null)c=".";b=typeof b=="string"?document.getElementById(b):b;var e=a(b),f={},g={};for(var h=0;h<e.length;h++){var i=e[h].value;if(d&&i==="")continue;var j=e[h].name,k=j.split(c),l=f,m="";for(var n=0;n<k.length;n++){var o=k[n],p="";if(o.indexOf("[]")>-1&&n==k.length-1)m=p=o.substr(0,o.indexOf("[")),l[p]||(l[p]=[]),l[p].push(i);else if(o.indexOf("[")>-1){p=o.substr(0,o.indexOf("["));var q=o.replace(/^[a-z]+\[|\]$/gi,"");m=m+p+q,g[m]||(g[m]={}),l[p]||(l[p]=[]),n==k.length-1?l[p].push(i):g[m][q]||(l[p].push({}),g[m][q]=l[p][l[p].length-1]),l=g[m][q]}else n<k.length-1?(l[o]||(l[o]={}),l=l[o]):l[o]=i}}return f},window.form2json=window.form2object}(),Sammy.Form2JSON=function(a){a._parseFormParams=function(a){return form2object(a[0])}}})(jQuery)